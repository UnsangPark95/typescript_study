# 9ì¥ íƒ€ì… ì œí•œì

### 9.1 top íƒ€ì…
ì‹œìŠ¤í…œì—ì„œ íƒ€ì…ê°€ëŠ¥í•œ ëª¨ë“  ê°’ì„ ë‚˜íƒ€ë‚´ëŠ” íƒ€ì…


### 9.1.1 any ë‹¤ì‹œ ë³´ê¸°
```typescript
let anyValue: any;
anyValue = "Lala";
anyValue = 123;

console.log(anyValue);
```

anyëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ í•´ë‹¹ ê°’ì— ëŒ€í•œ í• ë‹¹ ê°€ëŠ¥ì„± ë˜ëŠ” ë©¤ë²„ì— ëŒ€í•´ íƒ€ì… ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šë„ë¡ ëª…ì‹œì ìœ¼ë¡œ ì§€ì‹œí•œë‹¤ëŠ” ë¬¸ì œì 

```typescript
function greetComedian(name: any) {
  console.log(`Announcing ${name.toUpperCase()}!`);
}

greetComedian({name: "Bea Arthur"});
// Runtime error: name.toUpperCase is not a function 
```

â˜‘ï¸ ì–´ë–¤ ê°’ì´ë“  ë  ìˆ˜ ìˆìŒì„ ë‚˜íƒ€ë‚´ë ¤ë©´ **unknown íƒ€ì…ì„ ì“°ëŠ” ê²ƒì´ í›¨ì”¬ ì•ˆì „**


### 9.1.2 unknown
â˜‘ï¸ any íƒ€ì…ê³¼ì˜ ì£¼ìš” ì°¨ì´ì ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” unknown íƒ€ì…ì˜ ê°’ì„ í›¨ì”¬ ë” ì œí•œì ìœ¼ë¡œ ì·¨ê¸‰í•œë‹¤ëŠ” ì 
  - íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” unknown íƒ€ì… ê°’ì˜ ì†ì„±ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
  - unknown íƒ€ì…ì€ top íƒ€ì…ì´ ì•„ë‹Œ íƒ€ì…ì—ëŠ” í• ë‹¹í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

```typescript
function greetComedian(name: unknown) {
  console.log(`Announcing ${name.toUpperCase()}!`);
  // Error: 'name' is of type 'unknown'.
}
```

â˜‘ï¸ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ unknown íƒ€ì…ì¸ nameì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì€

**instanceof**ë‚˜ **typeof** ë˜ëŠ” **íƒ€ì… ì–´ì„œì…˜**ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì²˜ëŸ¼ ê°’ì˜ íƒ€ì…ì´ ì œí•œëœ ê²½ìš°
``` typescript
function greetComedianSafety(name: unknown) {
  if (typeof name === "string") {
    console.log(`Announcing ${name.toUpperCase()}!`);   // ok
  } else {
    console.log("Well, I'm off");
  }
}

greetComedianSafety("Betty");   // "Announcing BETTY!" 
greetComedianSafety({});        // "Well, I'm off"
```

---

### 9.2 íƒ€ì… ì„œìˆ ì–´
instanceof, typeofì™€ ê°™ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ êµ¬ë¬¸ì„ ì‚¬ìš©í•´ íƒ€ì…ì„ ì¢íˆëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ì˜€ì„ ë•Œ,

ì§ì ‘ ì‚¬ìš©í•  ë•ŒëŠ” ê´œì°®ì§€ë§Œ, ë¡œì§ì„ í•¨ìˆ˜ë¡œ ê°ì‹¸ë©´ íƒ€ì…ì„ ì¢í ìˆ˜ ì—†ê²Œ ë¨.

```typescript
function isNumberOrString(value: unknown) {
  return ['number', 'string'].includes(typeof value);
}

function logValueIfExists(value: number | string | null | undefined) {
  if (isNumberOrString(value)) {
    value.toString();   // Error: 'value' is possibly 'null' or 'undefined'.
  } else {
    console.log("Value does not exist:", value);
  }
}
```

â˜‘ï¸ íƒ€ì… ì„œìˆ ì–´: íƒ€ì… ê°€ë“œ ì—­í• ì„ í•˜ë„ë¡ ì£¼ì„ì´ ë‹¬ë¦° ë°˜í™˜ íƒ€ì…ì´ ìˆëŠ” í•¨ìˆ˜

íƒ€ì… ì„œìˆ ì–´ì˜ ë°˜í™˜ íƒ€ì…ì€ ë§¤ê°œë³€ìˆ˜ì˜ ì´ë¦„, is í‚¤ì›Œë“œ, íŠ¹ì • íƒ€ì…ìœ¼ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆìŒ
```typescript
function typePredicate(input: WideType): input is NarrowType;
```

íƒ€ì… ì„œìˆ ì–´ëŠ” ë‹¨ìˆœíˆ boolean ê°’ì„ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì¸ìˆ˜ê°€ ë” êµ¬ì²´ì ì¸ íƒ€ì…ì„ì„ ë‚˜íƒ€ë‚´ëŠ” ê²ƒ
```typescript
function isNumberOrString(value: unknown): value is number | string {
  return ['number', 'string'].includes(typeof value);
}

function logValueIfExists(value: number | string | null | undefined) {
  if (isNumberOrString(value)) {
    // value: number | stringì˜ íƒ€ì…
    value.toString();   // ok
  } else {
    // value: null | undefinedì˜ íƒ€ì…
    console.log("Value does not exist:", value);
  }
}
```

íƒ€ì… ì„œìˆ ì–´ëŠ” ì´ë¯¸ í•œ ì¸í„°í˜ì´ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¡œ ì•Œë ¤ì§„ ê°ì²´ê°€ ë” êµ¬ì²´ì ì¸ ì¸í„°í˜ì´ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ì¸ì§€ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•˜ëŠ” ë° ìì£¼ ì‚¬ìš©
```typescript
interface Comedian {
  funny: boolean;
}

interface StandupComedian extends Comedian {
  routine: string;
}

function isStandupComedian(value: Comedian): value is StandupComedian {
  return 'routine' in value;
}

function workWithComedian(value: Comedian) {
  if (isStandupComedian(value)) {
    // value: StandupComedianì˜ íƒ€ì…
    console.log(value.routine);   // ok
  }

  console.log(value.routine);
  // Error: Property 'routine' does not exist on type 'Comedian'.
}
```

â›”ï¸ íƒ€ì… ì„œìˆ ì–´ëŠ” false ì¡°ê±´ì—ì„œ íƒ€ì…ì„ ì¢íˆê¸° ë•Œë¬¸ì— íƒ€ì… ì„œìˆ ì–´ê°€ ì…ë ¥ëœ íƒ€ì… ì´ìƒì„ ê²€ì‚¬í•˜ëŠ” ê²½ìš° ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŒ

â˜‘ï¸ íƒ€ì… ì„œìˆ ì–´ëŠ” ì†ì„±ì´ë‚˜ ê°’ì˜ íƒ€ì…ì„ í™•ì¸í•˜ëŠ” ê²ƒ ì´ìƒì„ ìˆ˜í–‰í•´ ì˜ëª» ì‚¬ìš©í•˜ê¸° ì‰¬ìš°ë¯€ë¡œ ê°€ëŠ¥í•˜ë©´ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ìŒ

```typescript
function isLongString(input: string | undefined): input is string {
  console.log(input && input.length >= 7)
  return !!(input && input.length >= 7);
}

function workWithText(text: string | undefined) {
  if (isLongString(text)) {
    // text: string íƒ€ì…
    console.log("Long text: ", text.length);
  } else {
    // text: undefined íƒ€ì…
    console.log("Short text: ", text?.length);
    // Error: Property 'length' does not exist on type 'never'.
  }
}
```

---

### 9.3 íƒ€ì… ì—°ì‚°ì

### 9.3.1 keyof
1ï¸âƒ£ ì—„ê²©í•œ êµ¬ì„± ì„¤ì •
```typescript
interface Ratings {
  audience: number;
  critics: number;
}

function getRating(ratings: Ratings, key: string): number {
  return ratings[key];
  // Element implicitly has an 'any' type
  // because expression of type 'string' can't be used to index type 'Ratings'.
  // No index signature with a parameter of type 'string' was found on type 'Ratings'.
}

const ratings: Ratings = { audience: 66, critics: 84 };

getRating(ratings, 'audience');   // ok

getRating(ratings, 'not valid');  // í—ˆìš©ë˜ì§€ë§Œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë¨
```

2ï¸âƒ£ ë¦¬í„°ëŸ´ ìœ ë‹ˆì–¸ íƒ€ì…
  ì´ ê²½ìš° ì»¨í…Œì´ë„ˆì— ì¡´ì¬í•˜ëŠ” í‚¤ë§Œ ì ì ˆí•˜ê²Œ ì œí•œí•˜ëŠ” ê²ƒì´ ë” ì •í™•
```typescript
interface Ratings {
  audience: number;
  critics: number;
}

function getRating(ratings: Ratings, key: 'audience' | 'critics'): number {
  return ratings[key];
}

const ratings: Ratings = { audience: 66, critics: 84 };

getRating(ratings, 'audience');

getRating(ratings, 'not valid');
// Error: Argument of type '"not valid"' is not assignable to
// parameter of type '"audience" | "critics"'.
```

ğŸ†’ **keyof ì—°ì‚°ì**

íƒ€ì… ì• ë„ˆí…Œì´ì…˜ì²˜ëŸ¼ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ê³³ì—ì„œ íƒ€ì… ì´ë¦„ ì•ì— **keyof** ì—°ì‚°ìë¥¼ ë°°ì¹˜
```typescript
interface Ratings {
  audience: number;
  critics: number;
}

function getRating(ratings: Ratings, key: keyof Ratings): number {
  return ratings[key];
}

const ratings: Ratings = { audience: 66, critics: 84 };

getRating(ratings, 'audience');

getRating(ratings, 'not valid');
// Argument of type '"not valid"' is not assignable to
// parameter of type 'keyof Ratings'.
```

### 9.3.2 typeof
íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” ë˜ ë‹¤ë¥¸ íƒ€ì… ì—°ì‚°ì **typeof**

â›”ï¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ typeof ì—°ì‚°ìì™€ ë‹¤ë¦„!

```typescript
const original = {
  medium: "movie",
  title: "Mean Firals"
};

let adaptation: typeof original;

if (Math.random() > 0.5) {
  adaptation = { ...original, medium: "play"};    // ok
} else {
  adaptation = { ...original, medium: 123};
  // Error: Type 'number' is not assignable to type 'string'.
}
```

ğŸ†’ **keyof typeof**

typeofëŠ” ê°’ì˜ íƒ€ì…ì„ ê²€ìƒ‰í•˜ê³ , keyofëŠ” íƒ€ì…ì— í—ˆìš©ëœ í‚¤ë¥¼ ê²€ìƒ‰í•¨

```typescript
const ratings = {
  imdb: 8.4,
  metacritic: 82
};

function logRating(key: keyof typeof ratings) {
  console.log(ratings[key]);
}

logRating("imdb");      // ok

logRating("invalid");
// Argument of type '""' is not assignable to parameter of type '"imdb" | "metacritic"'.
```

---

### 9.4 íƒ€ì… ì–´ì„œì…˜
- ê°’ì˜ íƒ€ì…ì— ëŒ€í•œ íƒ€ì… ì‹œìŠ¤í…œì˜ ì´í•´ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•œ êµ¬ë¬¸ (íƒ€ì… ìºìŠ¤íŠ¸ë¼ê³ ë„ ë¶€ë¦„)
- ê°’ì´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ì˜ˆìƒí•˜ëŠ” ê²ƒê³¼ëŠ” ë‹¤ë¥¸ íƒ€ì…ì´ë¼ëŠ” ê²ƒì„ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì— ë‹¨ì–¸í•˜ëŠ” ê²ƒ

ë‹¤ë¥¸ íƒ€ì…ì„ ì˜ë¯¸í•˜ëŠ” ê°’ì˜ íƒ€ì… ë‹¤ìŒì— **as** í‚¤ì›Œë“œë¥¼ ë°°ì¹˜

```typescript
const rawData = '["grace", "frankie"]';

// íƒ€ì…: any
JSON.parse(rawData);

// íƒ€ì…: string[]
JSON.parse(rawData) as string[];

// íƒ€ì…: [string, string]
JSON.parse(rawData) as [string, string];

// íƒ€ì…: ["grace", "frankie"]
JSON.parse(rawData) as ["grace", "frankie"];
```

â›”ï¸ ê°€ëŠ¥í•œ í•œ íƒ€ì… ì–´ì„œì…˜ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²ƒì´ ì¢‹ìŒ

ğŸ†’ BUT íƒ€ì… ì–´ì„œì…˜ì´ ìœ ìš©í•˜ê³  ì‹¬ì§€ì–´ í•„ìš”í•œ ê²½ìš°ê°€ ì¢…ì¢… ìˆìŒ(9.4.1 / 9.4.2)

### 9.4.1 í¬ì°©ëœ ì˜¤ë¥˜ íƒ€ì… ì–´ì„œì…˜
ì˜¤ë¥˜ë¥¼ ì²˜ë¦¬í•  ë•Œ íƒ€ì… ì–´ì„œì…˜ì´ ë§¤ìš° ìœ ìš©í•  ìˆ˜ ìˆìŒ
```typescript
try {
  // (ì˜¤ë¥˜ ë°œìƒ ì½”ë“œ)
} catch (error) {
  console.warn("Oh no!", (error as Error).message);
}
```

â˜‘ï¸ ë°œìƒëœ ì˜¤ë¥˜ê°€ ì˜ˆìƒëœ ì˜¤ë¥˜ íƒ€ì…ì¸ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ instanceof ê²€ì‚¬ì™€ ê°™ì€ íƒ€ì… ë‚´ë¡œì‰ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì•ˆì „
```typescript
try {
  // (ì˜¤ë¥˜ ë°œìƒ ì½”ë“œ)
} catch (error) {
  console.warn("Oh no!", error instanceof Error ? error.message : error);
}
```

### 9.4.2 non-null ì–´ì„œì…˜
ì´ë¡ ì ìœ¼ë¡œë§Œ null ë˜ëŠ” undefinedë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” ë³€ìˆ˜ì—ì„œ nullê³¼ undefinedë¥¼ ì œê±°í•  ë•Œ íƒ€ì… ì–´ì„œì…˜ì„ ì£¼ë¡œ ì‚¬ìš©

nullê³¼ undefinedë¥¼ ì œì™¸í•œ ê°’ì˜ ì „ì²´ íƒ€ì…ì„ ì‘ì„±í•˜ëŠ” ëŒ€ì‹  !ë¥¼ ì‚¬ìš©í•˜ë©´ ë¨!
```typescript
// íƒ€ì… ìœ ì¶”: Date | undefined
let maybeData = Math.random() > 0.5
  ? undefined
  : new Date();

// íƒ€ì…ì´ Dateë¼ê³  ê°„ì£¼ë¨
maybeData as Date;

// íƒ€ì…ì´ Dateë¼ê³  ê°„ì£¼ë¨
maybeData!;
```
### 9.4.3 íƒ€ì… ì–´ì„œì…˜ ì£¼ì˜ ì‚¬í•­
â˜‘ï¸ any íƒ€ì…ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ íƒ€ì… ì–´ì„œì…˜ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì… ì‹œìŠ¤í…œì— í•„ìš”í•œ í•˜ë‚˜ì˜ ë„í”¼ ìˆ˜ë‹¨ => ê°€ëŠ¥í•œ í•œ ì‚¬ìš©í•˜ì§€ ë§ ê²ƒ!

1ï¸âƒ£ ì–´ì„œì…˜ vs ì„ ì–¸
```typescript
interface Entertainer {
  acts: string[];
  name: string;
}

const declared: Entertainer = {
  // Error: Property 'acts' is missing in type '{ name: string; }' but required in type 'Entertainer'.
  name: "Mons Mabley"
};

const asserted = {
  name: "Moms Mabley"
} as Entertainer;   // í—ˆìš©ë˜ì§€ë§Œ ëŸ°íƒ€ì„ ì‹œ ì˜¤ë¥˜ ë°œìƒ

// Runtime error: Cannot read properties of undefined (reading 'join') 
console.log(declared.acts.join(","));
console.log(asserted.acts.join(","));
```

2ï¸âƒ£ ì–´ì„œì…˜ í• ë‹¹ ê°€ëŠ¥ì„±

â›”ï¸ ì´ì¤‘ íƒ€ì… ì–´ì„œì…˜ì€ ìœ„í—˜í•˜ê³  ê±°ì˜ í•­ìƒ ì½”ë“œì˜ íƒ€ì…ì´ ì˜ëª»ë˜ì—ˆë‹¤ëŠ” ì§•í›„
```typescript
let myValue = "Stella!" as number;
// Error: Conversion of type 'string' to type 'number' may be a mistake
// because neither type sufficiently overlaps with the other.
// If this was intentional, convert the expression to 'unknown' first.

let myValueDouble = "1337" as unknown as number;    // í—ˆìš©ë˜ìë§Œ ì´ë ‡ê²Œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë¨
```

---

### 9.5 const ì–´ì„œì…˜
const ì–´ì„œì…˜ì€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì— íƒ€ì…ì„ ìœ ì¶”í•  ë•Œ ì½ê¸° ì „ìš©ì´ ê°€ëŠ¥í•œ ê°’ í˜•ì‹ì„ ì‚¬ìš©í•˜ë„ë¡ ì§€ì‹œ(6ì¥.ë°°ì—´)

const ì–´ì„œì…˜ì€ ë°°ì—´, ì›ì‹œ íƒ€ì…, ê°’, ë³„ì¹­ ë“± ëª¨ë“  ê°’ì„ ìƒìˆ˜ë¡œ ì·¨ê¸‰í•´ì•¼ í•¨ì„ ë‚˜íƒ€ë‚´ëŠ” ë° ì‚¬ìš©
- ë°°ì—´ì€ ê°€ë³€ ë°°ì—´ì´ ì•„ë‹ˆë¼ ì½ê¸° ì „ìš© íŠœí”Œë¡œ ì·¨ê¸‰
- ë¦¬í„°ëŸ´ì€ ì¼ë°˜ì ì¸ ì›ì‹œ íƒ€ì…ê³¼ ë™ë“±í•˜ì§€ ì•Šê³  ë¦¬í„°ëŸ´ë¡œ ì·¨ê¸‰
- ê°ì²´ì˜ ì†ì„±ì€ ì½ê¸° ì „ìš©ìœ¼ë¡œ ê°„ì£¼

### 9.5.1 ë¦¬í„°ëŸ´ì—ì„œ ì›ì‹œ íƒ€ì…ìœ¼ë¡œ

íƒ€ì… ì‹œìŠ¤í…œì´ ë¦¬í„°ëŸ´ ê°’ì„ ì¼ë°˜ì ì¸ ì›ì‹œ íƒ€ì…ìœ¼ë¡œ í™•ì¥í•˜ê¸°ë³´ë‹¤ íŠ¹ì • ë¦¬í„°ëŸ´ë¡œ ì´í•´í•˜ëŠ” ê²ƒì´ ìœ ìš©í•  ìˆ˜ ìˆìŒ
```typescript
// íƒ€ì…: () => string
const getName = () => "Maria";

// íƒ€ì…: () => "Maria"
const getNameConst = () => "Maria" as const;
```

ê°’ì˜ íŠ¹ì • í•„ë“œê°€ ë” êµ¬ì²´ì ì¸ ë¦¬í„°ëŸ´ ê°’ì„ ê°–ë„ë¡ í•˜ëŠ” ê²ƒë„ ìœ ìš©í•¨
```typescript
interface Joke {
  quote: string;
  style: "stoty" | "one-liner";
}

function tellJoke(joke: Joke) {
  if (joke.style === "one-liner") {
    console.log(joke.quote);
  } else {
    console.log(joke.quote.split("\n"));
  }
}

// íƒ€ì…: { quote: string; style: "one-liner" }
const narrowJoke = {
  quote: "If you stay alive for no other reason do it for spite.",
  style: "one-liner" as const
};

tellJoke(narrowJoke);     // ok

// íƒ€ì…: { quote: string; style: string }
const wideObject = {
  quote: "Time flies when you are anxious!",
  style: "one-liner"
};

tellJoke(wideObject);
// Error: Argument of type '{ quote: string; style: string; }'
// is not assignable to parameter of type 'Joke'.
// Types of property 'style' are incompatible.
// Type 'string' is not assignable to type '"one-liner" | "stoty"'.
```

### 9.5.2 ì½ê¸° ì „ìš© ê°ì²´
```typescript
function describePreference(preference: "maybe" | "no" | "yes") {
  switch (preference) {
    case "maybe":
      return "I suppose...";
    case "no":
      return "No thanks";
    case "yes":
      return "Yes please!";
  }
}

const preferencesMutable = {
  movie: "maybe",
  standup: "yes"
};

describePreference(preferenceMutable.movie);
// Error: Argument of type 'string' is not assignable to parameter of type '"maybe" | "no" | "yes"'.

preferencesMutable.movie = "no";   // ok

const preferencesReadonly = {
  movie: "maybe",
  standup: "yes"
} as const;

describePreference(preferencesReadonly.movie);    // ok

preferencesReadonly.movie = "no";
// Error: Cannot assign to 'movie' because it is a read-only property.
```

